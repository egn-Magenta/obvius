<%args>
$date
$month =>'long'
$year_format => 'long'
</%args>
%
<%init>
my $display_date;
my ($year, $mon, $day) = $date =~ /^(\d\d\d\d)-(\d\d)-(\d\d)/;

$year =~ s|.*(\d{2})$|$1| if ($year_format eq 'short');
if ($month eq 'long') {
    my $long_month = $m->scomp('/shared/msg', text=>$month_desc[$mon]);
    if ($vdoc->Lang eq 'da') {
        $display_date = "$day. $long_month $year";
    } else {
        $display_date = "$year-$mon-$day";
    }
} elsif ($month eq 'dot-numeric') {
    if ($vdoc->Lang eq 'da') {
        #Dansk punktformat
        $display_date = "$day.$mon.$year";
    } else {
        #International ditto.
        $display_date = "$year.$mon.$day";
    }
} else {
    my $short_month = $m->scomp('/shared/msg', text=>$month_short[$mon]);
    $display_date = "$day. $short_month $year";
}
</%init>
%
<%once>
my @month_desc = qw(none january february march april may june july august september october november december);
my @month_short = qw (none jan feb mar apr may jun jul aug sep oct nov dec);
</%once>
%
<% $display_date %>
